
@model ASP.NET.Views.Components.Weather.DefaultModel
<div id="weather-info"></div>

<script>
    
    const latitude = '@Model.Lat';
    const longitude = '@Model.Lng';
    const apiKey = '@Model.API_KEY_WEATHER';

    // Функция для обновления элемента на странице с полученными данными
    function updateWeatherInfo(data) {
        const weatherInfoDiv = document.getElementById('weather-info');
        weatherInfoDiv.innerHTML = `
                    <p>Температура: ${data.main.temp} K</p>
                    <p>Атмосферное давление: ${data.main.pressure} гПа</p>
                    <p>Влажность: ${data.main.humidity}%</p>
                    <p>Скорость ветра: ${data.wind.speed} м/с</p>
                  `;
    }

    async function fetchWeatherData() {
        try {
            const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${apiKey}`);
            const data = await response.json();
            updateWeatherInfo(data);
        } catch (error) {
            console.error('Ошибка при получении данных о погоде:', error);
        }
    }
    fetchWeatherData();
</script>